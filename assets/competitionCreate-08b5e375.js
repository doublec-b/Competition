import{i as c,_ as V,d as y,o as k,c as E,a as u,b as o,w as a,F as I,e as d,t as F}from"./index-cab0c1d3.js";import{c as D,E as m,a as T,b as A,d as v}from"./el-table-column-5d03c13f.js";import{E as z,a as U,b as $,c as L}from"./el-form-item-6fab6664.js";import{E as W}from"./el-select-4908b9ba.js";function _(e){return c({url:"/api/competitionCreate/page/user",method:"post",data:e})}function B(e){return c({url:`/api/competitionCreate/one?id=${e}`,method:"get"})}function O(e){return c({url:"/api/competitionCreate/delete/"+e,method:"get"})}function N(e){return c({url:"/api/competitionCreate/add",method:"post",data:e})}function P(e){return c({url:"/api/competitionCreate/edit",method:"post",data:e})}const M=y({data(){return{page:{total:0,current:1,size:6},selectPage:{total:0,current:1,size:6,pagerCount:5},input:"",competitionCreates:[],searchId:"",dialogFormVisible:!1,competitionCreate:{id:0,userId:1,title:"",content:"",startTime:new Date,endTime:new Date,signup:0,target:"",type:"",createTime:new Date,updateTime:new Date,deleted:0,aimCompetition:0,state:0,checked:0,schoolId:0},formLabelWidth:80}},mounted(){this.getAllCopetitionCreate(1)},methods:{research(){this.searchId=null,this.getAllCopetitionCreate(1)},search(){if(this.searchId==""){alert("请选择后进行查询");return}B(this.searchId).then(e=>{console.log(e),this.competitionCreates=[],this.competitionCreates.push(e.data.competitionCreate),this.page.size=6,this.page.total=0}).catch(e=>{console.log(e)})},toEdit(e){this.dialogFormVisible=!0,this.competitionCreate=D(e)},getAllCopetitionCreate(e){_({current:e,size:6,colums:[],userId:1}).then(p=>{console.log(p);const h=p.data.page;this.competitionCreates=h.records,this.page=h,console.log("****",this.page)}).catch(p=>{console.log(p)})},del(e){O(e).then(t=>{if(t.success)this.getAllCopetitionCreate(1);else return console.log(t.msg),!1}).catch(t=>{})},currentchange(e){this.getAllCopetitionCreate(e),this.page.current=e},toAdd(){this.dialogFormVisible=!0,this.competitionCreate={id:0,userId:1,title:"",content:"",startTime:new Date,endTime:new Date,signup:0,target:"",type:"",createTime:new Date,updateTime:new Date,deleted:0,aimCompetition:0,state:0,checked:0,schoolId:0}},save(){const e=this.competitionCreate;e.id==0?N(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getAllCopetitionCreate(1),m(t.msg);else return m(t.msg),!1}).catch(t=>{m("网络错误联系管理员")}):P(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getAllCopetitionCreate(1),m(t.msg);else return m(t.msg),!1}).catch(t=>{m("网络错误联系管理员")})}}}),S={style:{"margin-top":"10px"}},j={style:{width:"95%",margin:"0 auto"}},q={style:{width:"95%",margin:"0 auto","margin-bottom":"10px"}},G={class:"dialog-footer"};function H(e,t,p,h,J,K){const i=z,r=U,s=$,n=v,g=T,f=W,C=L,b=A;return k(),E(I,null,[u("div",S,[u("div",j,[o(r,{label:"比赛编号","label-width":110,style:{display:"inline-flex","margin-right":"10px"}},{default:a(()=>[o(i,{modelValue:e.searchId,"onUpdate:modelValue":t[0]||(t[0]=l=>e.searchId=l),placeholder:"比赛编号"},null,8,["modelValue"])]),_:1}),o(s,{type:"primary",onClick:e.search},{default:a(()=>[d("查询")]),_:1},8,["onClick"])]),u("div",q,[o(s,{type:"info",onClick:e.research},{default:a(()=>[d("重置")]),_:1},8,["onClick"]),o(s,{type:"success",onClick:e.toAdd},{default:a(()=>[d("添加")]),_:1},8,["onClick"])]),o(g,{data:e.competitionCreates,style:{width:"95%",margin:"0 auto"}},{default:a(()=>[o(n,{fixed:"",prop:"id",label:"编号",width:"80"}),o(n,{prop:"aimCompetition",label:"目标赛事",width:"120"}),o(n,{prop:"content",label:"内容",width:"120"}),o(n,{prop:"title",label:"竞赛标题",width:"150"}),o(n,{prop:"target",label:"竞赛对象",width:"150"}),o(n,{prop:"type",label:"竞赛类型",width:"150"}),o(n,{prop:"checked",label:"审核状态",width:"150"},{default:a(l=>[d(F(l.row.type==1?"已审核":"未审核"),1)]),_:1}),o(n,{fixed:"right",label:"操作",width:"120"},{default:a(l=>[o(s,{link:"",type:"warning",size:"small",onClick:w=>e.toEdit(l.row)},{default:a(()=>[d("更新")]),_:2},1032,["onClick"]),o(s,{link:"",type:"danger",size:"small",onClick:w=>e.del(l.row.id)},{default:a(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(f,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,style:{width:"95%",margin:"0 auto"},onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),o(b,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[8]||(t[8]=l=>e.dialogFormVisible=l),title:"竞赛编辑"},{footer:a(()=>[u("span",G,[o(s,{onClick:t[7]||(t[7]=l=>e.dialogFormVisible=!1)},{default:a(()=>[d("取消")]),_:1}),o(s,{type:"primary",onClick:e.save},{default:a(()=>[d(" 保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[o(C,{model:e.competitionCreate},{default:a(()=>[o(r,{label:"目标赛事","label-width":e.formLabelWidth},{default:a(()=>[o(i,{modelValue:e.competitionCreate.aimCompetition,"onUpdate:modelValue":t[1]||(t[1]=l=>e.competitionCreate.aimCompetition=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"内容","label-width":e.formLabelWidth},{default:a(()=>[o(i,{modelValue:e.competitionCreate.content,"onUpdate:modelValue":t[2]||(t[2]=l=>e.competitionCreate.content=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"竞赛标题","label-width":e.formLabelWidth},{default:a(()=>[o(i,{modelValue:e.competitionCreate.title,"onUpdate:modelValue":t[3]||(t[3]=l=>e.competitionCreate.title=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"竞赛对象","label-width":e.formLabelWidth},{default:a(()=>[o(i,{modelValue:e.competitionCreate.target,"onUpdate:modelValue":t[4]||(t[4]=l=>e.competitionCreate.target=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"竞赛类型","label-width":e.formLabelWidth},{default:a(()=>[o(i,{modelValue:e.competitionCreate.type,"onUpdate:modelValue":t[5]||(t[5]=l=>e.competitionCreate.type=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(r,{label:"审核状态","label-width":e.formLabelWidth},{default:a(()=>[o(i,{modelValue:e.competitionCreate.checked,"onUpdate:modelValue":t[6]||(t[6]=l=>e.competitionCreate.checked=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),u("template",null,[o(i,{modelValue:e.input,"onUpdate:modelValue":t[9]||(t[9]=l=>e.input=l),placeholder:"Please input"},null,8,["modelValue"])])],64)}const Z=V(M,[["render",H]]);export{Z as default};
