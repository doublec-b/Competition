import{i as u,_ as V,d as w,o as C,c as k,a as m,b as o,w as i,F as y,e as p}from"./index-cab0c1d3.js";import{c as v,E as r,a as E,b as F,d as I}from"./el-table-column-5d03c13f.js";import{E as U,a as A,b as L,c as _}from"./el-form-item-6fab6664.js";import{E as $}from"./el-date-picker-445695d7.js";function W(){return u({url:"/api/competition/all",method:"get"})}function z(e){return u({url:`/api/competition/one?id=${e}`,method:"get"})}function D(e){return u({url:`/api/competition/delete?id=${e}`,method:"get"})}function P(e){return u({url:"/api/competition/add",method:"post",data:e})}function B(e){return u({url:"/api/competition/edit",method:"post",data:e})}const O=w({data(){return{input:"",competitions:[],searchId:"",dialogFormVisible:!1,competition:{id:0,name:"",start:new Date,end:new Date,homePage:"",type:"",level:"",organizer:"",schoolId:74},formLabelWidth:80}},mounted(){this.getAllCopetition()},methods:{research(){this.searchId=null,this.getAllCopetition()},search(){if(this.searchId==""){alert("请选择后进行查询");return}z(this.searchId).then(e=>{console.log(e),this.competitions=[],this.competitions.push(e.data.competition),console.log(this.userLevels)}).catch(e=>{console.log(e)})},toEdit(e){this.dialogFormVisible=!0,this.competition=v(e)},getAllCopetition(){W().then(e=>{console.log(e),this.competitions=e.data.competitions}).catch(e=>{console.log(e)})},del(e){D(e).then(l=>{if(l.success)this.getAllCopetition();else return console.log(l.msg),!1}).catch(l=>{})},toAdd(){this.dialogFormVisible=!0,this.competition={id:0,name:"",start:new Date,end:new Date,homePage:"",type:"",level:"",organizer:"",schoolId:74}},save(){const e=this.competition;e.id==0?P(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getAllCopetition(),r(l.msg);else return r(l.msg),!1}).catch(l=>{r("网络错误联系管理员")}):B(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getAllCopetition(),r(l.msg);else return r(l.msg),!1}).catch(l=>{r("网络错误联系管理员")})}}}),N={style:{"margin-top":"10px"}},T={style:{width:"95%",margin:"0 auto"}},M={style:{width:"95%",margin:"0 auto","margin-bottom":"10px"}},j={class:"block"},q={class:"block"},G={class:"dialog-footer"};function H(e,l,J,K,Q,R){const d=U,n=A,s=L,a=I,f=E,h=$,c=_,b=F;return C(),k(y,null,[m("div",N,[m("div",T,[o(n,{label:"比赛编号","label-width":110,style:{display:"inline-flex","margin-right":"10px"}},{default:i(()=>[o(d,{modelValue:e.searchId,"onUpdate:modelValue":l[0]||(l[0]=t=>e.searchId=t),placeholder:"比赛编号"},null,8,["modelValue"])]),_:1}),o(s,{type:"primary",onClick:e.search},{default:i(()=>[p("查询")]),_:1},8,["onClick"])]),m("div",M,[o(s,{type:"info",onClick:e.research},{default:i(()=>[p("重置")]),_:1},8,["onClick"]),o(s,{type:"success",onClick:e.toAdd},{default:i(()=>[p("添加")]),_:1},8,["onClick"])]),o(f,{data:e.competitions,style:{width:"95%",margin:"0 auto",height:"800px"}},{default:i(()=>[o(a,{fixed:"",prop:"id",label:"编号",width:"80"}),o(a,{prop:"name",label:"竞赛名",width:"120"}),o(a,{prop:"start",label:"开始日期",width:"120"}),o(a,{prop:"end",label:"结束日期",width:"150"}),o(a,{prop:"homePage",label:"网站主页",width:"150"}),o(a,{prop:"type",label:"类型",width:"150"}),o(a,{prop:"level",label:"比赛等级",width:"150"}),o(a,{prop:"organizer",label:"组织者",width:"150"}),o(a,{fixed:"right",label:"操作",width:"120"},{default:i(t=>[o(s,{link:"",type:"warning",size:"small",onClick:g=>e.toEdit(t.row)},{default:i(()=>[p("更新")]),_:2},1032,["onClick"]),o(s,{link:"",type:"danger",size:"small",onClick:g=>e.del(t.row.id)},{default:i(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),o(b,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[9]||(l[9]=t=>e.dialogFormVisible=t),title:"竞赛编辑"},{footer:i(()=>[m("span",G,[o(s,{onClick:l[8]||(l[8]=t=>e.dialogFormVisible=!1)},{default:i(()=>[p("取消")]),_:1}),o(s,{type:"primary",onClick:e.save},{default:i(()=>[p(" 保存 ")]),_:1},8,["onClick"])])]),default:i(()=>[o(c,{model:e.competition},{default:i(()=>[o(n,{label:"比赛名","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.competition.name,"onUpdate:modelValue":l[1]||(l[1]=t=>e.competition.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"开始时间","label-width":e.formLabelWidth},{default:i(()=>[m("div",j,[o(h,{modelValue:e.competition.start,"onUpdate:modelValue":l[2]||(l[2]=t=>e.competition.start=t),type:"datetime",placeholder:"请选择开始时间"},null,8,["modelValue"])])]),_:1},8,["label-width"]),o(n,{label:"结束时间","label-width":e.formLabelWidth},{default:i(()=>[m("div",q,[o(h,{modelValue:e.competition.end,"onUpdate:modelValue":l[3]||(l[3]=t=>e.competition.end=t),type:"datetime",placeholder:"请选择结束时间"},null,8,["modelValue"])])]),_:1},8,["label-width"]),o(n,{label:"网站主页","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.competition.homePage,"onUpdate:modelValue":l[4]||(l[4]=t=>e.competition.homePage=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"类型","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.competition.type,"onUpdate:modelValue":l[5]||(l[5]=t=>e.competition.type=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"比赛等级","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.competition.level,"onUpdate:modelValue":l[6]||(l[6]=t=>e.competition.level=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"组织者","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.competition.organizer,"onUpdate:modelValue":l[7]||(l[7]=t=>e.competition.organizer=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),m("template",null,[o(d,{modelValue:e.input,"onUpdate:modelValue":l[10]||(l[10]=t=>e.input=t),placeholder:"Please input"},null,8,["modelValue"])])],64)}const x=V(O,[["render",H]]);export{x as default};
