import{i as r,_ as V,d as b,o as S,c as C,a as m,b as o,w as i,F as w,e as n,t as I}from"./index-cab0c1d3.js";import{c as k,E as d,a as _,b as y,d as E}from"./el-table-column-5d03c13f.js";import{E as U,a as F,b as T,c as $}from"./el-form-item-6fab6664.js";import{E as v}from"./el-date-picker-445695d7.js";function D(e){return r({url:`/api/competitionSignup/getStudentSignupCompetitionVos/${e}`,method:"get"})}function L(e){return r({url:`/api/competition/delete?id=${e}`,method:"get"})}function W(e){return r({url:"/api/competitionSignup/add",method:"post",data:e})}function A(e){return r({url:"/api/competition/edit",method:"post",data:e})}const B=b({data(){return{input:"",studentSignupCompetitionVos:[],studentSignupCompetitionVo:{studentId:0,competitionId:0,createTime:new Date,checked:0},searchId:0,dialogFormVisible:!1,formLabelWidth:80}},mounted(){},methods:{research(){this.searchId=null,this.getStudentSignUp(0)},search(){if(this.searchId==""){alert("请选择后进行查询");return}this.getStudentSignUp(this.searchId)},toEdit(e){this.dialogFormVisible=!0,this.competition=k(e)},getStudentSignUp(e){e==0&&(e=5),console.log("----",e),D(e).then(t=>{console.log("***",t),this.studentSignupCompetitionVos=t.data.studentSignupCompetitionVos}).catch(t=>{console.log(t)})},del(e){L(e).then(t=>{if(t.success)this.getAllCopetition();else return console.log(t.msg),!1}).catch(t=>{})},toAdd(){this.dialogFormVisible=!0,this.studentSignupCompetitionVo={id:0,studentId:0,competitionId:0,createTime:new Date,checked:0}},save(){const e=this.studentSignupCompetitionVo;e.id==0?W(e).then(t=>{if(t.success)this.dialogFormVisible=!1,console.log("///",e.competitionId),this.getStudentSignUp(e.competitionId),d(t.msg);else return d(t.msg),!1}).catch(t=>{d("网络错误联系管理员")}):A(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getStudentSignUp(),d(t.msg);else return d(t.msg),!1}).catch(t=>{d("网络错误联系管理员")})}}}),N={style:{"margin-top":"10px"}},O={style:{width:"95%",margin:"0 auto","margin-bottom":"10px"}},P={class:"block"},M={class:"dialog-footer"};function j(e,t,q,z,G,H){const a=U,s=F,u=T,p=E,c=_,g=v,h=$,f=y;return S(),C(w,null,[m("div",N,[o(s,{label:"比赛编号","label-width":110,style:{display:"inline-flex","margin-right":"10px"}},{default:i(()=>[o(a,{modelValue:e.searchId,"onUpdate:modelValue":t[0]||(t[0]=l=>e.searchId=l),placeholder:"比赛编号"},null,8,["modelValue"])]),_:1}),o(u,{type:"primary",onClick:e.search},{default:i(()=>[n("查询")]),_:1},8,["onClick"]),m("div",O,[o(u,{type:"info",onClick:e.research},{default:i(()=>[n("重置")]),_:1},8,["onClick"]),o(u,{type:"success",onClick:e.toAdd},{default:i(()=>[n("报名")]),_:1},8,["onClick"])]),o(c,{data:e.studentSignupCompetitionVos,style:{width:"95%",margin:"0 auto",height:"800px"}},{default:i(()=>[o(p,{fixed:"",prop:"id",label:"编号",width:"80"}),o(p,{prop:"studentId",label:"学生编号",width:"120"}),o(p,{prop:"competitionId",label:"比赛编号",width:"120"}),o(p,{prop:"createTime",label:"创建时间",width:"150"}),o(p,{prop:"checked",label:"审核状态",width:"150"},{default:i(l=>[n(I(l.row.type==1?"已审核":"未审核"),1)]),_:1})]),_:1},8,["data"])]),o(f,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[6]||(t[6]=l=>e.dialogFormVisible=l),title:"竞赛编辑"},{footer:i(()=>[m("span",M,[o(u,{onClick:t[5]||(t[5]=l=>e.dialogFormVisible=!1)},{default:i(()=>[n("取消")]),_:1}),o(u,{type:"primary",onClick:e.save},{default:i(()=>[n(" 保存 ")]),_:1},8,["onClick"])])]),default:i(()=>[o(h,{model:e.studentSignupCompetitionVo},{default:i(()=>[o(s,{label:"学生编号","label-width":e.formLabelWidth},{default:i(()=>[o(a,{modelValue:e.studentSignupCompetitionVo.studentId,"onUpdate:modelValue":t[1]||(t[1]=l=>e.studentSignupCompetitionVo.studentId=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"比赛编号","label-width":e.formLabelWidth},{default:i(()=>[o(a,{modelValue:e.studentSignupCompetitionVo.competitionId,"onUpdate:modelValue":t[2]||(t[2]=l=>e.studentSignupCompetitionVo.competitionId=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"创建时间","label-width":e.formLabelWidth},{default:i(()=>[m("div",P,[o(g,{modelValue:e.studentSignupCompetitionVo.createTime,"onUpdate:modelValue":t[3]||(t[3]=l=>e.studentSignupCompetitionVo.createTime=l),type:"datetime",placeholder:"请选择创建时间"},null,8,["modelValue"])])]),_:1},8,["label-width"]),o(s,{label:"审核状态","label-width":e.formLabelWidth},{default:i(()=>[o(a,{modelValue:e.studentSignupCompetitionVo.checked,"onUpdate:modelValue":t[4]||(t[4]=l=>e.studentSignupCompetitionVo.checked=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),m("template",null,[o(a,{modelValue:e.input,"onUpdate:modelValue":t[7]||(t[7]=l=>e.input=l),placeholder:"Please input"},null,8,["modelValue"])])],64)}const X=V(B,[["render",j]]);export{X as default};
